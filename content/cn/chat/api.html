---
title: 享聊 - API
id: cn/chat/api
---
     
      <section class="mt16 mb16">
        <div class="container">
          <div class="row">
            <div class="col-md-12 text-center mt16 mb32">
              <h2>享聊API接口</h2>
              <h3 class="text-muted">使用说明</h3>
            </div>
            <div>

  <h2>SteedOS Chat REST API</h2>
  <div id="slow">
    <p>The SteedOS Chat REST API allow you control and extend SteedOS Chat.</p>
    <p>Our RESTful APIs should be easy to extend, and the current implementation is specifically coded to illustrate techniques required to overcome common problems.</p>
    <p>For security reasons, if you are deploying in production, make sure you have:</p>
    <p>&nbsp;&nbsp;&nbsp;&nbsp;a) configured and only call REST APIs over HTTPS</p>
    <p>&nbsp;&nbsp;&nbsp;&nbsp;b) implement a timed authorization token expiry strategy</p>
  </div>
  <h2>Obtaining the running SteedOS Chat version via REST API</h2>
  <div id="fast">
    <p>This is the only API you can call without logging in. It is useful to ensure that you have activated REST API properly.</p>
    
    <pre><code>curl http://localhost:3000/api/version

{
   "status": "success",
   "versions": {
      "api": "0.1",
      "steedoschat": "0.5"
   }
}
</pre></code>

  <br>
  <h2>Logon with REST API</h2>
  <p>requires authentication: no<p>
  <p>http method: post<p>
  <p>expected payload:<p>
  <p>&nbsp;&nbsp;&nbsp;&nbsp;user: the username to use authentication as<p>
  <p>&nbsp;&nbsp;&nbsp;&nbsp;password: the password for that user<p>
  <p>Notes:<p>
  <p>&nbsp;&nbsp;&nbsp;&nbsp;<b>You will need to provide the authToken and userId for any of the authenticated methods.</b><p>
  <pre><code>curl http://localhost:3000/api/login 
    -d "password=MySECRET&user=sing"

{
  "status": "success",
  "data": {
      "authToken": "9HqLlyZOugoStsXCUfD_0YdwnNnunAJF8V47U3QHXSq",
      "userId": "aobEdbYhXfu5hkeqG"
   }
}
</code></pre>

  <br>
  <h2>Logoff with REST API</h2>
  <pre><code>curl -H "X-Auth-Token: 9HqLlyZOugoStsXCUfD_0YdwnNnunAJF8V47U3QHXSq" 
  -H "X-User-Id: aobEdbYhXfu5hkeqG" 
  http://localhost:3000/api/logout

{
   "status": "success",
   "data": {
     "message": "You've been logged out!"
   }
}</code></pre>

  <br>
  <h2>Get list of public rooms via REST API</h2>
  <pre>curl -H "X-Auth-Token: 9HqLlyZOugoStsXCUfD_0YdwnNnunAJFV47U3QHXSq" 
  -H "X-User-Id: aobEdbYhXfu5hkeqG" 
  http://localhost:3000/api/publicRooms

{
  "status": "success",
  "rooms": [
    {
      "_id": "GENERAL",
      "usernames": [
        "admin",
        "sing"
      ],
     "ts": "2015-07-24T14:35:23.542Z",
     "t": "c",
      "other fields": "other fields ...."<code></code></pre>

  <br>
  <h2>Join a room via REST API</h2>
  <pre><code>curl -H "X-Auth-Token: S5u0ZNNbc5W6Qqug90JdWRT2sxEWgz9m5mu2dWOQ5v" 
  -H "X-User-Id: aobEdbYhXfu5hkeqG" 
  http://localhost:3000/api/rooms/x4pRahjs5oYcTYu7i/join 
  -d "{}"

{
   "status": "success"
}</code></pre>

  <br>
  <h2>Leave a room via REST API</h2>
  <pre><code>curl -H "X-Auth-Token: S5u0ZNNbc5W6Qqug90JdWRT2sxEWgz9m5mu2dWOQ5v" 
  -H "X-User-Id: aobEdbYhXfu5hkeqG" 
  http://localhost:3000/api/rooms/x4pRahjs5oYcTYu7i/leave 
  -d "{}"

 {
   "status": "success"
 }</code></pre>

  <br>
  <h2>Get all unread messages in a room via REST API</h2>
  <pre><code>curl -H "X-Auth-Token: S5u0ZNNbc5W6Qqug5mu2dWOQ5v" 
      -H "X-User-Id: aobEdbYhXfu5hkeqG"
   http://localhost:3000/api/rooms/x4pRahjs5oYcTYu7i/messages     

 {
    "status": "success",
    "messages": [
      {
        "_id": "apr5LTtj6ACYEFAJi",
        "rid": "x4pRahjs5oYcTYu7i",
        "msg": "We don't play games with your data.",
        "ts": "2015-07-27T15:25:43.549Z",
         "u": {
           "_id": "GaRouhq7BFWz2tSJd",
           "other fields": "other fields ...." </code></pre>

  <br>
  <h2>Sending a message via REST API</h2>
  <pre><code>curl -H "X-Auth-Token: S5u0ZNNbc5W6Qqug90JdWRT2sxEWgz9mR5mu2dWOQ5v" 
     -H "Content-Type: application/json" 
     -X POST 
     -H "X-User-Id: aobEdbYhXfu5hkeqG" 
        http://localhost:3000/api/rooms/x4pRahjs5oYcTYu7i/send 
     -d "{ \"msg\" : \"OK\" }"

{
  "status": "success"
}</code></pre>

  
            </div>
          </div>
        </div>
      </section>